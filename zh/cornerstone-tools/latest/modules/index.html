<!DOCTYPE html>
<html lang="中文">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>模块 Modules | Cornerstone</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/cornerstone-book/logo.png">
    <link rel="manifest" href="/cornerstone-book/manifest.json">
    <link rel="apple-touch-icon" href="/cornerstone-book/icons/logo512.png">
    <link rel="mask-icon" href="/cornerstone-book/icons/logo512.png" color="#3eaf7c">
    <meta name="description" content="Cornerstone 是一个开源项目，致力于交付一个基于 web 端的医疗影像平台。">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/logo512.png.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/cornerstone-book/assets/css/0.styles.7961eb8e.css" as="style"><link rel="preload" href="/cornerstone-book/assets/js/app.9dbdfba9.js" as="script"><link rel="preload" href="/cornerstone-book/assets/js/2.48bf54f8.js" as="script"><link rel="preload" href="/cornerstone-book/assets/js/172.db97c3ef.js" as="script"><link rel="preload" href="/cornerstone-book/assets/js/3.6f4cde73.js" as="script"><link rel="prefetch" href="/cornerstone-book/assets/js/10.557e8087.js"><link rel="prefetch" href="/cornerstone-book/assets/js/100.8e7bacd8.js"><link rel="prefetch" href="/cornerstone-book/assets/js/101.5d3c7cd3.js"><link rel="prefetch" href="/cornerstone-book/assets/js/102.60d17d1c.js"><link rel="prefetch" href="/cornerstone-book/assets/js/103.cd057321.js"><link rel="prefetch" href="/cornerstone-book/assets/js/104.3e624d22.js"><link rel="prefetch" href="/cornerstone-book/assets/js/105.df1656c8.js"><link rel="prefetch" href="/cornerstone-book/assets/js/106.0cad39ae.js"><link rel="prefetch" href="/cornerstone-book/assets/js/107.b90a2da8.js"><link rel="prefetch" href="/cornerstone-book/assets/js/108.80a86be9.js"><link rel="prefetch" href="/cornerstone-book/assets/js/109.0de0b8bd.js"><link rel="prefetch" href="/cornerstone-book/assets/js/11.81f67d90.js"><link rel="prefetch" href="/cornerstone-book/assets/js/110.8e568eb4.js"><link rel="prefetch" href="/cornerstone-book/assets/js/111.0919f778.js"><link rel="prefetch" href="/cornerstone-book/assets/js/112.a2917112.js"><link rel="prefetch" href="/cornerstone-book/assets/js/113.815c2666.js"><link rel="prefetch" href="/cornerstone-book/assets/js/114.b0cc9473.js"><link rel="prefetch" href="/cornerstone-book/assets/js/115.ed7ea724.js"><link rel="prefetch" href="/cornerstone-book/assets/js/116.fb838a27.js"><link rel="prefetch" href="/cornerstone-book/assets/js/117.fa756981.js"><link rel="prefetch" href="/cornerstone-book/assets/js/118.508a897f.js"><link rel="prefetch" href="/cornerstone-book/assets/js/119.c2f58ec7.js"><link rel="prefetch" href="/cornerstone-book/assets/js/12.ec98d674.js"><link rel="prefetch" href="/cornerstone-book/assets/js/120.e87b3ed2.js"><link rel="prefetch" href="/cornerstone-book/assets/js/121.0f798ffd.js"><link rel="prefetch" href="/cornerstone-book/assets/js/122.fa6f8ca6.js"><link rel="prefetch" href="/cornerstone-book/assets/js/123.e32a1a43.js"><link rel="prefetch" href="/cornerstone-book/assets/js/124.f62e815c.js"><link rel="prefetch" href="/cornerstone-book/assets/js/125.d645080d.js"><link rel="prefetch" href="/cornerstone-book/assets/js/126.9b4d0e25.js"><link rel="prefetch" href="/cornerstone-book/assets/js/127.1a5ec250.js"><link rel="prefetch" href="/cornerstone-book/assets/js/128.dea2128b.js"><link rel="prefetch" href="/cornerstone-book/assets/js/129.cec382b4.js"><link rel="prefetch" href="/cornerstone-book/assets/js/13.d5b029f0.js"><link rel="prefetch" href="/cornerstone-book/assets/js/130.1e7a258a.js"><link rel="prefetch" href="/cornerstone-book/assets/js/131.6a42ec11.js"><link rel="prefetch" href="/cornerstone-book/assets/js/132.27485b00.js"><link rel="prefetch" href="/cornerstone-book/assets/js/133.d0c7e108.js"><link rel="prefetch" href="/cornerstone-book/assets/js/134.5546004a.js"><link rel="prefetch" href="/cornerstone-book/assets/js/135.275996e9.js"><link rel="prefetch" href="/cornerstone-book/assets/js/136.b9c53f78.js"><link rel="prefetch" href="/cornerstone-book/assets/js/137.941a7c2a.js"><link rel="prefetch" href="/cornerstone-book/assets/js/138.f989ba55.js"><link rel="prefetch" href="/cornerstone-book/assets/js/139.ddc6c784.js"><link rel="prefetch" href="/cornerstone-book/assets/js/14.efd47020.js"><link rel="prefetch" href="/cornerstone-book/assets/js/140.bd0a01e3.js"><link rel="prefetch" href="/cornerstone-book/assets/js/141.f61dee44.js"><link rel="prefetch" href="/cornerstone-book/assets/js/142.0a763164.js"><link rel="prefetch" href="/cornerstone-book/assets/js/143.d028ed5b.js"><link rel="prefetch" href="/cornerstone-book/assets/js/144.02f255c0.js"><link rel="prefetch" href="/cornerstone-book/assets/js/145.26d2e6a5.js"><link rel="prefetch" href="/cornerstone-book/assets/js/146.a0d3dd2f.js"><link rel="prefetch" href="/cornerstone-book/assets/js/147.daa251f8.js"><link rel="prefetch" href="/cornerstone-book/assets/js/148.8c9d6e36.js"><link rel="prefetch" href="/cornerstone-book/assets/js/149.331b4877.js"><link rel="prefetch" href="/cornerstone-book/assets/js/15.5db6f610.js"><link rel="prefetch" href="/cornerstone-book/assets/js/150.1e1a15de.js"><link rel="prefetch" href="/cornerstone-book/assets/js/151.c01c5875.js"><link rel="prefetch" href="/cornerstone-book/assets/js/152.30d2b155.js"><link rel="prefetch" href="/cornerstone-book/assets/js/153.15d8cec1.js"><link rel="prefetch" href="/cornerstone-book/assets/js/154.bde25e53.js"><link rel="prefetch" href="/cornerstone-book/assets/js/155.0bd81fd7.js"><link rel="prefetch" href="/cornerstone-book/assets/js/156.69e7348a.js"><link rel="prefetch" href="/cornerstone-book/assets/js/157.4b6827a4.js"><link rel="prefetch" href="/cornerstone-book/assets/js/158.23174794.js"><link rel="prefetch" href="/cornerstone-book/assets/js/159.d0b5cc8b.js"><link rel="prefetch" href="/cornerstone-book/assets/js/16.62d589cc.js"><link rel="prefetch" href="/cornerstone-book/assets/js/160.d285119c.js"><link rel="prefetch" href="/cornerstone-book/assets/js/161.b2c30c9d.js"><link rel="prefetch" href="/cornerstone-book/assets/js/162.1fbb1548.js"><link rel="prefetch" href="/cornerstone-book/assets/js/163.d00908b4.js"><link rel="prefetch" href="/cornerstone-book/assets/js/164.58bcce2b.js"><link rel="prefetch" href="/cornerstone-book/assets/js/165.2882c00d.js"><link rel="prefetch" href="/cornerstone-book/assets/js/166.e1902c74.js"><link rel="prefetch" href="/cornerstone-book/assets/js/167.9f703be5.js"><link rel="prefetch" href="/cornerstone-book/assets/js/168.2f402c2a.js"><link rel="prefetch" href="/cornerstone-book/assets/js/169.6925a6fe.js"><link rel="prefetch" href="/cornerstone-book/assets/js/17.e3809dfa.js"><link rel="prefetch" href="/cornerstone-book/assets/js/170.9ce221bd.js"><link rel="prefetch" href="/cornerstone-book/assets/js/171.5c09103c.js"><link rel="prefetch" href="/cornerstone-book/assets/js/173.d32b3b64.js"><link rel="prefetch" href="/cornerstone-book/assets/js/174.55a925ae.js"><link rel="prefetch" href="/cornerstone-book/assets/js/175.2eeb74be.js"><link rel="prefetch" href="/cornerstone-book/assets/js/176.c26d4a47.js"><link rel="prefetch" href="/cornerstone-book/assets/js/177.66c702b1.js"><link rel="prefetch" href="/cornerstone-book/assets/js/178.48e87bdc.js"><link rel="prefetch" href="/cornerstone-book/assets/js/179.ef73d507.js"><link rel="prefetch" href="/cornerstone-book/assets/js/18.cc2df5bd.js"><link rel="prefetch" href="/cornerstone-book/assets/js/180.b75d4661.js"><link rel="prefetch" href="/cornerstone-book/assets/js/181.7abc7eaf.js"><link rel="prefetch" href="/cornerstone-book/assets/js/182.26cba666.js"><link rel="prefetch" href="/cornerstone-book/assets/js/183.d2cd3c38.js"><link rel="prefetch" href="/cornerstone-book/assets/js/184.805e82b5.js"><link rel="prefetch" href="/cornerstone-book/assets/js/185.0d527df4.js"><link rel="prefetch" href="/cornerstone-book/assets/js/186.5b74a80f.js"><link rel="prefetch" href="/cornerstone-book/assets/js/187.c15dc626.js"><link rel="prefetch" href="/cornerstone-book/assets/js/188.2e6ded77.js"><link rel="prefetch" href="/cornerstone-book/assets/js/189.deae32a6.js"><link rel="prefetch" href="/cornerstone-book/assets/js/19.6a1e0dae.js"><link rel="prefetch" href="/cornerstone-book/assets/js/190.2c0ae8eb.js"><link rel="prefetch" href="/cornerstone-book/assets/js/191.6ad155d3.js"><link rel="prefetch" href="/cornerstone-book/assets/js/192.13858221.js"><link rel="prefetch" href="/cornerstone-book/assets/js/193.cb4a239f.js"><link rel="prefetch" href="/cornerstone-book/assets/js/194.10b5714e.js"><link rel="prefetch" href="/cornerstone-book/assets/js/195.065516bc.js"><link rel="prefetch" href="/cornerstone-book/assets/js/196.1cd02b42.js"><link rel="prefetch" href="/cornerstone-book/assets/js/197.5bb1de54.js"><link rel="prefetch" href="/cornerstone-book/assets/js/198.05202000.js"><link rel="prefetch" href="/cornerstone-book/assets/js/199.c1bbfabe.js"><link rel="prefetch" href="/cornerstone-book/assets/js/20.e3703432.js"><link rel="prefetch" href="/cornerstone-book/assets/js/200.10550262.js"><link rel="prefetch" href="/cornerstone-book/assets/js/201.ed3010f6.js"><link rel="prefetch" href="/cornerstone-book/assets/js/202.31ca1707.js"><link rel="prefetch" href="/cornerstone-book/assets/js/203.60e331d6.js"><link rel="prefetch" href="/cornerstone-book/assets/js/204.776bf8aa.js"><link rel="prefetch" href="/cornerstone-book/assets/js/205.43c74e58.js"><link rel="prefetch" href="/cornerstone-book/assets/js/206.a00aa36f.js"><link rel="prefetch" href="/cornerstone-book/assets/js/207.c1025bbd.js"><link rel="prefetch" href="/cornerstone-book/assets/js/208.220abf4d.js"><link rel="prefetch" href="/cornerstone-book/assets/js/209.b8b252a9.js"><link rel="prefetch" href="/cornerstone-book/assets/js/21.f3a796d9.js"><link rel="prefetch" href="/cornerstone-book/assets/js/210.de4583f7.js"><link rel="prefetch" href="/cornerstone-book/assets/js/211.c406bb0d.js"><link rel="prefetch" href="/cornerstone-book/assets/js/212.25848be9.js"><link rel="prefetch" href="/cornerstone-book/assets/js/213.33bf915c.js"><link rel="prefetch" href="/cornerstone-book/assets/js/214.28b36366.js"><link rel="prefetch" href="/cornerstone-book/assets/js/215.5299c310.js"><link rel="prefetch" href="/cornerstone-book/assets/js/216.e57365f2.js"><link rel="prefetch" href="/cornerstone-book/assets/js/217.f001147a.js"><link rel="prefetch" href="/cornerstone-book/assets/js/218.606608cd.js"><link rel="prefetch" href="/cornerstone-book/assets/js/219.5ad27241.js"><link rel="prefetch" href="/cornerstone-book/assets/js/22.36dc107b.js"><link rel="prefetch" href="/cornerstone-book/assets/js/220.efca954e.js"><link rel="prefetch" href="/cornerstone-book/assets/js/221.a2c38bec.js"><link rel="prefetch" href="/cornerstone-book/assets/js/222.c97ad116.js"><link rel="prefetch" href="/cornerstone-book/assets/js/223.d3cff298.js"><link rel="prefetch" href="/cornerstone-book/assets/js/224.af2c4f88.js"><link rel="prefetch" href="/cornerstone-book/assets/js/225.5400c532.js"><link rel="prefetch" href="/cornerstone-book/assets/js/226.fa3ba92f.js"><link rel="prefetch" href="/cornerstone-book/assets/js/227.7f0ede4f.js"><link rel="prefetch" href="/cornerstone-book/assets/js/228.6edec797.js"><link rel="prefetch" href="/cornerstone-book/assets/js/229.78fc2e6c.js"><link rel="prefetch" href="/cornerstone-book/assets/js/23.0d98e779.js"><link rel="prefetch" href="/cornerstone-book/assets/js/230.2accce23.js"><link rel="prefetch" href="/cornerstone-book/assets/js/231.96ecd75e.js"><link rel="prefetch" href="/cornerstone-book/assets/js/232.ff9cdb76.js"><link rel="prefetch" href="/cornerstone-book/assets/js/233.e1628d15.js"><link rel="prefetch" href="/cornerstone-book/assets/js/234.2c05da62.js"><link rel="prefetch" href="/cornerstone-book/assets/js/235.739ed336.js"><link rel="prefetch" href="/cornerstone-book/assets/js/236.41b246fa.js"><link rel="prefetch" href="/cornerstone-book/assets/js/237.44cd5998.js"><link rel="prefetch" href="/cornerstone-book/assets/js/238.0d9c4a49.js"><link rel="prefetch" href="/cornerstone-book/assets/js/239.1c96c082.js"><link rel="prefetch" href="/cornerstone-book/assets/js/24.389f34f0.js"><link rel="prefetch" href="/cornerstone-book/assets/js/240.ac8c3fce.js"><link rel="prefetch" href="/cornerstone-book/assets/js/25.96b065ef.js"><link rel="prefetch" href="/cornerstone-book/assets/js/26.7fc02d57.js"><link rel="prefetch" href="/cornerstone-book/assets/js/27.684ee6ec.js"><link rel="prefetch" href="/cornerstone-book/assets/js/28.f61c3630.js"><link rel="prefetch" href="/cornerstone-book/assets/js/29.338b945a.js"><link rel="prefetch" href="/cornerstone-book/assets/js/30.19836e57.js"><link rel="prefetch" href="/cornerstone-book/assets/js/31.d1ad4549.js"><link rel="prefetch" href="/cornerstone-book/assets/js/32.7111d375.js"><link rel="prefetch" href="/cornerstone-book/assets/js/33.a867de63.js"><link rel="prefetch" href="/cornerstone-book/assets/js/34.0effc446.js"><link rel="prefetch" href="/cornerstone-book/assets/js/35.32f1a01f.js"><link rel="prefetch" href="/cornerstone-book/assets/js/36.a368fbf5.js"><link rel="prefetch" href="/cornerstone-book/assets/js/37.a0410ca0.js"><link rel="prefetch" href="/cornerstone-book/assets/js/38.ed2601bc.js"><link rel="prefetch" href="/cornerstone-book/assets/js/39.a1849bfc.js"><link rel="prefetch" href="/cornerstone-book/assets/js/4.d151e051.js"><link rel="prefetch" href="/cornerstone-book/assets/js/40.cc838edd.js"><link rel="prefetch" href="/cornerstone-book/assets/js/41.977a2bde.js"><link rel="prefetch" href="/cornerstone-book/assets/js/42.5c4f2d93.js"><link rel="prefetch" href="/cornerstone-book/assets/js/43.84ffc9aa.js"><link rel="prefetch" href="/cornerstone-book/assets/js/44.9eb6229d.js"><link rel="prefetch" href="/cornerstone-book/assets/js/45.55eee099.js"><link rel="prefetch" href="/cornerstone-book/assets/js/46.043507bb.js"><link rel="prefetch" href="/cornerstone-book/assets/js/47.76246a67.js"><link rel="prefetch" href="/cornerstone-book/assets/js/48.6e21f149.js"><link rel="prefetch" href="/cornerstone-book/assets/js/49.bc2791d6.js"><link rel="prefetch" href="/cornerstone-book/assets/js/5.b790eb11.js"><link rel="prefetch" href="/cornerstone-book/assets/js/50.c18decd3.js"><link rel="prefetch" href="/cornerstone-book/assets/js/51.b208a0e2.js"><link rel="prefetch" href="/cornerstone-book/assets/js/52.b4fb9d5c.js"><link rel="prefetch" href="/cornerstone-book/assets/js/53.3ad37b7c.js"><link rel="prefetch" href="/cornerstone-book/assets/js/54.5fd4a9e4.js"><link rel="prefetch" href="/cornerstone-book/assets/js/55.2ab833bd.js"><link rel="prefetch" href="/cornerstone-book/assets/js/56.982f71c1.js"><link rel="prefetch" href="/cornerstone-book/assets/js/57.f68fc5b1.js"><link rel="prefetch" href="/cornerstone-book/assets/js/58.b20b54bf.js"><link rel="prefetch" href="/cornerstone-book/assets/js/59.4e1e09c7.js"><link rel="prefetch" href="/cornerstone-book/assets/js/6.2e7125b5.js"><link rel="prefetch" href="/cornerstone-book/assets/js/60.a9f411a4.js"><link rel="prefetch" href="/cornerstone-book/assets/js/61.1b2ffc08.js"><link rel="prefetch" href="/cornerstone-book/assets/js/62.85567973.js"><link rel="prefetch" href="/cornerstone-book/assets/js/63.b0bc4781.js"><link rel="prefetch" href="/cornerstone-book/assets/js/64.3d065a70.js"><link rel="prefetch" href="/cornerstone-book/assets/js/65.75f8d774.js"><link rel="prefetch" href="/cornerstone-book/assets/js/66.4c3931ae.js"><link rel="prefetch" href="/cornerstone-book/assets/js/67.b3501f03.js"><link rel="prefetch" href="/cornerstone-book/assets/js/68.e7fb7f10.js"><link rel="prefetch" href="/cornerstone-book/assets/js/69.1394e998.js"><link rel="prefetch" href="/cornerstone-book/assets/js/7.ff9bfac6.js"><link rel="prefetch" href="/cornerstone-book/assets/js/70.8ee6d2a7.js"><link rel="prefetch" href="/cornerstone-book/assets/js/71.fa40303c.js"><link rel="prefetch" href="/cornerstone-book/assets/js/72.004aade2.js"><link rel="prefetch" href="/cornerstone-book/assets/js/73.20bdb8c4.js"><link rel="prefetch" href="/cornerstone-book/assets/js/74.9e30d9bc.js"><link rel="prefetch" href="/cornerstone-book/assets/js/75.1ac511ef.js"><link rel="prefetch" href="/cornerstone-book/assets/js/76.8598f6bf.js"><link rel="prefetch" href="/cornerstone-book/assets/js/77.5bf2f34d.js"><link rel="prefetch" href="/cornerstone-book/assets/js/78.b38dfffa.js"><link rel="prefetch" href="/cornerstone-book/assets/js/79.bf535a98.js"><link rel="prefetch" href="/cornerstone-book/assets/js/8.cb2011ce.js"><link rel="prefetch" href="/cornerstone-book/assets/js/80.df658f53.js"><link rel="prefetch" href="/cornerstone-book/assets/js/81.24757c70.js"><link rel="prefetch" href="/cornerstone-book/assets/js/82.34f38613.js"><link rel="prefetch" href="/cornerstone-book/assets/js/83.bcb1d433.js"><link rel="prefetch" href="/cornerstone-book/assets/js/84.0d37e558.js"><link rel="prefetch" href="/cornerstone-book/assets/js/85.96a93c9b.js"><link rel="prefetch" href="/cornerstone-book/assets/js/86.df66a7a0.js"><link rel="prefetch" href="/cornerstone-book/assets/js/87.501e9e29.js"><link rel="prefetch" href="/cornerstone-book/assets/js/88.95f59057.js"><link rel="prefetch" href="/cornerstone-book/assets/js/89.6c3e4c95.js"><link rel="prefetch" href="/cornerstone-book/assets/js/9.eb577b09.js"><link rel="prefetch" href="/cornerstone-book/assets/js/90.03af8b4a.js"><link rel="prefetch" href="/cornerstone-book/assets/js/91.5ee28cbf.js"><link rel="prefetch" href="/cornerstone-book/assets/js/92.ab2a40b7.js"><link rel="prefetch" href="/cornerstone-book/assets/js/93.078b053b.js"><link rel="prefetch" href="/cornerstone-book/assets/js/94.1d8fa61c.js"><link rel="prefetch" href="/cornerstone-book/assets/js/95.1a86bf39.js"><link rel="prefetch" href="/cornerstone-book/assets/js/96.8d9e3e18.js"><link rel="prefetch" href="/cornerstone-book/assets/js/97.08ed141f.js"><link rel="prefetch" href="/cornerstone-book/assets/js/98.3597b316.js"><link rel="prefetch" href="/cornerstone-book/assets/js/99.8d90eb82.js">
    <link rel="stylesheet" href="/cornerstone-book/assets/css/0.styles.7961eb8e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/cornerstone-book/zh/" class="home-link router-link-active"><img src="/cornerstone-book/logo.png" alt="Cornerstone" class="logo"> <span class="site-name can-hide">Cornerstone</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/cornerstone-book/zh/SUMMARY/" class="nav-link">
  指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="示例" class="dropdown-title"><span class="title">示例</span> <span class="arrow down"></span></button> <button type="button" aria-label="示例" class="mobile-dropdown-title"><span class="title">示例</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cornerstone-book/example/index.html" target="_blank" rel="noopener" class="nav-link external">
  cornerstone
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/cornerstone-book/cornerstone-tools-2-examples/index.html" target="_blank" rel="noopener" class="nav-link external">
  cornerstoneTools V2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/cornerstone-book/cst-examples/index.html" target="_blank" rel="noopener" class="nav-link external">
  cornerstoneTools 最新
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/cornerstone-book/zh/api.html" class="nav-link">
  API
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="插件" class="dropdown-title"><span class="title">插件</span> <span class="arrow down"></span></button> <button type="button" aria-label="插件" class="mobile-dropdown-title"><span class="title">插件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基石工具库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/cornerstone-book/zh/cornerstone-tools/latest/SUMMARY.html" target="_blank" rel="noopener" class="nav-link external">
  latest
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="/cornerstone-book/zh/cornerstone-tools/v2/SUMMARY.html" target="_blank" rel="noopener" class="nav-link external">
  v2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="/cornerstone-book/zh/cornerstone-tools/v3/SUMMARY.html" target="_blank" rel="noopener" class="nav-link external">
  v3
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="选择语言" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cornerstone-book/cornerstone-tools/latest/modules/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/cornerstone-book/zh/cornerstone-tools/latest/modules/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/cornerstone-book/zh/SUMMARY/" class="nav-link">
  指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="示例" class="dropdown-title"><span class="title">示例</span> <span class="arrow down"></span></button> <button type="button" aria-label="示例" class="mobile-dropdown-title"><span class="title">示例</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cornerstone-book/example/index.html" target="_blank" rel="noopener" class="nav-link external">
  cornerstone
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/cornerstone-book/cornerstone-tools-2-examples/index.html" target="_blank" rel="noopener" class="nav-link external">
  cornerstoneTools V2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/cornerstone-book/cst-examples/index.html" target="_blank" rel="noopener" class="nav-link external">
  cornerstoneTools 最新
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/cornerstone-book/zh/api.html" class="nav-link">
  API
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="插件" class="dropdown-title"><span class="title">插件</span> <span class="arrow down"></span></button> <button type="button" aria-label="插件" class="mobile-dropdown-title"><span class="title">插件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基石工具库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/cornerstone-book/zh/cornerstone-tools/latest/SUMMARY.html" target="_blank" rel="noopener" class="nav-link external">
  latest
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="/cornerstone-book/zh/cornerstone-tools/v2/SUMMARY.html" target="_blank" rel="noopener" class="nav-link external">
  v2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="/cornerstone-book/zh/cornerstone-tools/v3/SUMMARY.html" target="_blank" rel="noopener" class="nav-link external">
  v3
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="选择语言" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cornerstone-book/cornerstone-tools/latest/modules/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/cornerstone-book/zh/cornerstone-tools/latest/modules/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>模块 Modules</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cornerstone-book/zh/cornerstone-tools/latest/modules/#modules" class="sidebar-link">Modules</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/cornerstone-book/zh/cornerstone-tools/latest/modules/#global-configuration" class="sidebar-link">global-configuration</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/cornerstone-book/zh/cornerstone-tools/latest/modules/#cursors" class="sidebar-link">cursors</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/cornerstone-book/zh/cornerstone-tools/latest/modules/#segmentation" class="sidebar-link">segmentation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cornerstone-book/zh/cornerstone-tools/latest/modules/#data-structure" class="sidebar-link">Data Structure</a></li><li class="sidebar-sub-header"><a href="/cornerstone-book/zh/cornerstone-tools/latest/modules/#usage-within-cornerstonetools" class="sidebar-link">Usage within cornerstoneTools</a></li><li class="sidebar-sub-header"><a href="/cornerstone-book/zh/cornerstone-tools/latest/modules/#updating-labelmap-occupancy" class="sidebar-link">Updating labelmap occupancy</a></li><li class="sidebar-sub-header"><a href="/cornerstone-book/zh/cornerstone-tools/latest/modules/#usage-by-application" class="sidebar-link">Usage by application</a></li><li class="sidebar-sub-header"><a href="/cornerstone-book/zh/cornerstone-tools/latest/modules/#usage-by-third-party-libraries" class="sidebar-link">Usage by third party libraries.</a></li><li class="sidebar-sub-header"><a href="/cornerstone-book/zh/cornerstone-tools/latest/modules/#backdoor" class="sidebar-link">Backdoor</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="模块-modules"><a href="#模块-modules" class="header-anchor">#</a> 模块 Modules</h1> <h2 id="modules"><a href="#modules" class="header-anchor">#</a> Modules</h2> <p>模块是 <code>store</code> 中具有名称空间的存储对象，它包含以下属性:</p> <table><thead><tr><th>Property</th> <th>Requirement</th> <th>Description</th></tr></thead> <tbody><tr><td>configuration</td> <td>Mandatory</td> <td>为应用程序范围的使用配置模块的对象。配置旨在通过内部和外部的方法来操作 <code>cornerstoneTools</code>.</td></tr> <tr><td>state</td> <td>Optional</td> <td>存储模块当前状态的对象。状态只能由 <code>cornerstoneTools</code> 和 <code>cornerstoneTools</code> 插件操作。没有严格的结构状态必须遵循，因为它将特定于模块试图完成的任务。</td></tr> <tr><td>getters</td> <td>Optional</td> <td>由查询状态的函数组成的对象。getter可用于更复杂的状态查询（例如，生成一个引用特定的“基石”启用元素的值）。不需要计算的顶级原语应该由<code>const property=state.property</code> 访问，因为这减少了实现代码中的样板文件。</td></tr> <tr><td>setters</td> <td>Optional</td> <td>由修改状态的函数组成的对象。setter可以用于更复杂的输入（例如，将一个对象 <code>x</code>，<code>push</code> 到数组 <code>y</code>）。顶层原始值应该由 <code>state.property=value</code> 设置，因为这样可以减少实现代码中的样板文件。</td></tr> <tr><td>onRegisterCallback (name)</td> <td>Optional</td> <td>当模块注册到 <code>cornerstoneTools</code> <code>store</code> 时，将调用此函数。它用于执行模块所需的任何全局初始化。模块在注册时给出的 <code>name</code> 传递给回调。</td></tr> <tr><td>enabledElementCallback (enabledElement)</td> <td>Optional</td> <td>在注册模块时，将为每个<code>Enabled</code> 元素调用一次此函数，并在任何时候向 <code>cornerstoneTools</code> 实例添加新的 <code>Enabled</code> 元素时再次调用此函数。<code>Enabled</code> 元素被传递给回调。</td></tr> <tr><td>removeEnabledElementCallback (enabledElement)</td> <td>Optional</td> <td>每当从 <code>cornerstoneTools</code> 实例中删除 <code>Enabled</code> 元素时，就会调用此函数，以清除不需要的数据。“Enabled”元素被传递给回调。</td></tr></tbody></table> <h2 id="global-configuration"><a href="#global-configuration" class="header-anchor">#</a> global-configuration</h2> <p>🚧
TODO! Feel free to contribute.</p> <h2 id="cursors"><a href="#cursors" class="header-anchor">#</a> cursors</h2> <p>🚧
TODO! Feel free to contribute.</p> <h2 id="segmentation"><a href="#segmentation" class="header-anchor">#</a> segmentation</h2> <p>分割模块处理每个 cornerstone 图像，将堆栈的 3D labelmap 数据集中处理。数据集中有两个原因：</p> <ul><li><p>cornerstone 中，每个 imageId 存储的数据是二维格式的，labelmaps 通常都是三维的结构。将整个 3D labelmap 的数据集中起来，并且 cornerstone 可以根据需要访问其 2D 和 3D 展示，这样就可以灵活地执行 2D 和 3D 操作，而无需每次重新聚合数据</p></li> <li><p>将 3D labelmap存储在一个 <code>ArrayBuffer</code> 中可以实现更好的互操作性和与 3D平台的和谐集成，比如 <a href="https://kitware.github.io/vtk-js/" target="_blank" rel="noopener noreferrer">vtk-js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 。如果使用诸如 <code>vtk js</code> 之类的 WebGL 库，建议您在分段模块配置中设置使用 <code>Float32Array</code> 分段。</p></li></ul> <h3 id="data-structure"><a href="#data-structure" class="header-anchor">#</a> Data Structure</h3> <p>数据结构
The data is stored in a <em>top-down</em> hierarchal fashion, with the coarsest level being study-wide. The types themselves are JSDoc'd in <code>src/store/modules/segmentationModule/index.js</code>, but a more in-depth overview is given here:</p> <h4 id="series"><a href="#series" class="header-anchor">#</a> Series</h4> <p>The series object under <code>state.series</code> is the highest level object, containing a set of <code>BrushStackState</code>s with a 1:1 correlation with cornerstone stacks. Each <code>BrushStackState</code> is currently indexed each stack by the imageId of the first image in the stack.</p> <h4 id="brushstackstate"><a href="#brushstackstate" class="header-anchor">#</a> BrushStackState</h4> <p>A <code>BrushStackState</code> object contains two properties:</p> <ul><li><code>labelmaps3D</code>: An array of one or more <code>Labelmap3D</code> objects, which are the same dimensions as the stack (<code>width * height * numberOfFrames</code>).</li> <li>'activeLabelmapIndex`: The array index of the active labelmap.</li></ul> <p>Each <code>Labelmap3D</code> object can contain multiple non-overlapping segments. To use have overlapping segments in your application, use multiple <code>Labelmap3D</code>s.</p> <h4 id="labelmap3d"><a href="#labelmap3d" class="header-anchor">#</a> Labelmap3D</h4> <p>A <code>Labelmap3D</code> is a single, non-overlapping labelmap with the following properties:</p> <ul><li><code>buffer</code>: An <code>ArrayBuffer</code> where the labels for each voxel are stored sequentially in increasing x, y, z. It has the same orientation as the stack, so increasing <code>z</code> is increasing <code>imageIdIndex</code> in the stack. By default, each label is stored as 2 bytes (encoded as Uint16Array), allowing for up to <code>65535</code> unique segments (+ 0 being empty/unlabelled). By setting the segmentation configuration property <code>arrayType</code> to <code>Float32Array</code> you can instead store the labelmap as a format more harmonious with <code>vtkjs</code>. <code>vtkjs</code> has to convert non-<code>Float32Array</code>s when generating textures to pass to the GPU, and this is very costly. If you are using vtkjs in your application its highly recommended to use <code>Float32Array</code>s for segmentations for decreased texture building times. This is especially noticable when using the <code>vtkjs</code> paint widget, for example.</li> <li><code>labelmaps2D</code>: An array of <code>labelmap2D</code> views on the <code>buffer</code>, indexed by in-stack <code>imageIdIndex</code>. The <code>labelmaps2D</code> array is initially empty, and each view is defined only if data is added to it, and should be removed if set empty (all zero labels). This makes it easy for the segmentation renderer, I/O libraries such as <a href="https://github.com/dcmjs-org/dcmjs" target="_blank" rel="noopener noreferrer"><code>dcmjs</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, and tools to localise the extent of segments without having to scan through every label in the stack.</li> <li><code>metadata</code>: An array of metadata objects per segment. Metadata is optional and its form is application specific. You may want a simple name for your label in your UI, or you may want more complex objects referencing standard libraries for anatomical region. The metadata is not used internally by <code>cornerstoneTools</code>, but acts an optional logical place to keep such data for your application.</li> <li><code>activeSegmentIndex</code>: The index of the segment to be created/modified when using <code>BaseBrushTool</code>s or segmentation tools, when th labelmap is active.</li> <li><code>colorLUTIndex</code>: The index of the colorLUT to use when rendering the labelmap.</li> <li><code>segmentsHidden</code>: An array of segments to hide from the canvas. Initially empty to save space, set an index to <code>true</code> to hide the corresponding segment.</li></ul> <h4 id="labelmap2d"><a href="#labelmap2d" class="header-anchor">#</a> Labelmap2D</h4> <p>A <code>Labelmap2D</code> is a 2D view of one frame of the segmentation, it is the object primarily interacted with from the cornerstone canvas, and has the following properties:</p> <ul><li><code>pixelData</code>: a <code>Uint16Array</code> or <code>Float32Array</code> view of a portion of the parent <code>Labelmap3D</code>'s <code>buffer</code>, corresponding to the frame. Array type depends on the segmentation module's <code>arrayType</code> setting.</li> <li><code>segmentsOnLabelmap</code>: An array of segments present in the <code>pixelData</code>. Whenever a tool or external manipulates the <code>pixelData</code> viewed by the <code>Labelmap2D</code>, this list should be updated. This is generally very cheap to do on the fly, e.g. after a scissor action or after a full brush stroke, but speeds up IO dramatically when compressing data to DICOMSEG, for instance, as you can work out how much memory needs to be allocated with very simple checks.</li></ul> <h3 id="usage-within-cornerstonetools"><a href="#usage-within-cornerstonetools" class="header-anchor">#</a> Usage within cornerstoneTools</h3> <p>When using a tool on a cornerstone image, you can easily access the <code>Labelmap2D</code> of the active <code>Labelmap3D</code>. by querying the segmentationModule:</p> <p>Import the <code>segmentationModule</code> <code>getters</code> at the top of the file.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./store'</span><span class="token punctuation">;</span> <span class="token comment">//appropriate relative path</span>

<span class="token comment">// Destructure the parts of the module you require from the getters, setters, state and configuration. Here we only need the getters.</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> getters <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">getModule</span><span class="token punctuation">(</span><span class="token string">'segmentation'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Then during <code>cornerstoneTools</code> event callback, where <code>evt</code> is the event:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> eventData <span class="token operator">=</span> evt<span class="token punctuation">.</span>detail<span class="token punctuation">;</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> eventData<span class="token punctuation">.</span>element<span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span>
  labelmap2D<span class="token punctuation">,</span> <span class="token comment">// The `Labelmap2D` for this imageId.</span>
  labelmap3D<span class="token punctuation">,</span> <span class="token comment">// The `Labelmap3D` for this stack.</span>
  currentImageIdIndex<span class="token punctuation">,</span> <span class="token comment">// The currentImageIdIndex of this image in the stack.</span>
  activeLabelmapIndex<span class="token punctuation">,</span> <span class="token comment">// The labelmapIndex of this active labelmap.</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> getters<span class="token punctuation">.</span><span class="token function">labelmap2D</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This provides you all the information you need. You can grab as few or as many elements of this object as you need by destructuring appropriately.</p> <h4 id="editing-the-labelmap-directly"><a href="#editing-the-labelmap-directly" class="header-anchor">#</a> Editing the labelmap directly</h4> <p>You can then edit the labelmap directly:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> pixelData <span class="token punctuation">}</span> <span class="token operator">=</span> labelmap2D<span class="token punctuation">;</span>

pixelData<span class="token punctuation">[</span><span class="token number">1337</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">9001</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="using-the-drawbrushpixels-helper"><a href="#using-the-drawbrushpixels-helper" class="header-anchor">#</a> Using the <code>drawBrushPixels</code> helper</h4> <p>Or if using a brush you can use the <code>drawBrushPixels</code> helper to paint an array of 2D-coordinates to the <code>Labelmap2D</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> rows<span class="token punctuation">,</span> columns <span class="token punctuation">}</span> <span class="token operator">=</span> eventData<span class="token punctuation">.</span>image<span class="token punctuation">;</span>
<span class="token keyword">const</span> pointerArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// Something grabbed by your brush.</span>
<span class="token keyword">const</span> shouldErase <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token comment">// Imported from src/util/segmentation</span>
<span class="token function">drawBrushPixels</span><span class="token punctuation">(</span>
  pointerArray<span class="token punctuation">,</span>
  labelmap2D<span class="token punctuation">.</span>pixelData<span class="token punctuation">,</span>
  labelmap3D<span class="token punctuation">.</span>activeSegmentIndex<span class="token punctuation">,</span>
  columns<span class="token punctuation">,</span>
  shouldErase
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>To get the labelmap2D of another image in the stack which is not currently displayed:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> imageIdIndex <span class="token operator">=</span> <span class="token number">99</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> labelmap2DofImageIdIndex99 <span class="token operator">=</span> getters<span class="token punctuation">.</span><span class="token function">labelmap2DByImageIdIndex</span><span class="token punctuation">(</span>
  labelmap3D<span class="token punctuation">,</span>
  imageIdIndex<span class="token punctuation">,</span>
  rows<span class="token punctuation">,</span>
  columns
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>An example of this usage can be found in the <code>SphericalBrushTool</code>.</p> <p>Both <code>getters.labelmap2D</code> and <code>getters.labelmap2DByImageIdIndex</code> will return the <code>Labelmap2D</code> if it exists, and create it and return it if not.</p> <p>Additionally <code>getters.labelmap2D</code> will initialise and create both the <code>BrushStackState</code> and <code>Labelmap3D</code>, if neither exist yet.</p> <h3 id="updating-labelmap-occupancy"><a href="#updating-labelmap-occupancy" class="header-anchor">#</a> Updating labelmap occupancy</h3> <p>Upon finishing an operation on a <code>Labelmap2D</code>, the tool/operation should call <code>setters.updateSegmentsOnLabelmap2D(labelmap2D)</code> on the <code>Labelmap2D</code> to update its <code>segmentsOnLabelmap</code> property. This property being correct up to date is useful for other tools, and I/O libraries.</p> <p>This is not done automatically, because the end of an operationn might depend on the task. E.g. after one use of the <code>CircleScissorsTool</code>, we'll call <code>updateSegmentsOnLabelmap2D</code>, however we only do it at the <em>end</em> of <code>BrushTool</code> stroke. You may have a more complicated procedure whereby you perform a series of iterative growcuts with human intervention, and only want to update the labelmap occupancy at the end.</p> <h3 id="usage-by-application"><a href="#usage-by-application" class="header-anchor">#</a> Usage by application</h3> <p>The parent application can retrieve information about the labelmaps by querying the API. From <code>metadata</code>, to <code>colorLUT</code>s per <code>Labelmap3D</code>.</p> <p>The most useful getter function is probably <code>getLabelmaps3D(elementOrEnabledElementUID)</code>, which when given a cornerstone <code>element</code>, or a cornerstone <code>enabledElement</code>'s UUID, returns a list of <code>Labelmap3D</code> objects, which can be parsed in order to generate UI.</p> <p>A set of <code>setters</code> can be linked to UI components to change the active segment, set segment color, etc, refer to the API documentation for a full list of helpers.</p> <h3 id="usage-by-third-party-libraries"><a href="#usage-by-third-party-libraries" class="header-anchor">#</a> Usage by third party libraries.</h3> <p>You may wish to access one or more <code>Labelmap3D</code> <code>buffers</code> from outside <code>cornerstoneTools</code>, in order to either export them to persistent storage, or display them in another framwork, such as <a href="https://kitware.github.io/vtk-js/" target="_blank" rel="noopener noreferrer"><code>vtkjs</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>To retrieve the ArrayBuffer for the activeLabelmap on an <code>element</code>, from outside of <code>cornerstoneTools</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> getters <span class="token punctuation">}</span> <span class="token operator">=</span> cornerstoneTools<span class="token punctuation">.</span><span class="token function">getModule</span><span class="token punctuation">(</span><span class="token string">'segmentation'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Active buffer:</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> buffer<span class="token punctuation">,</span> labelmapIndex<span class="token punctuation">,</span> colorLUT <span class="token punctuation">}</span> <span class="token operator">=</span> getters<span class="token punctuation">.</span><span class="token function">activeLabelmapBuffer</span><span class="token punctuation">(</span>
  element
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// All labelmap buffers:</span>
<span class="token keyword">const</span> bufferInfoArray <span class="token operator">=</span> getters<span class="token punctuation">.</span><span class="token function">labelmapBuffers</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// A specific buffer:</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> buffer7<span class="token punctuation">,</span> colorLUT7 <span class="token punctuation">}</span> <span class="token operator">=</span> getters<span class="token punctuation">.</span><span class="token function">labelmapBuffers</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>These functions also return the <code>colorLUT</code> (not just its index), so that you can map another renderer to the same color scheme. Note these are just helper functions, and you can indeed fetch all the <code>Labelmap3D</code> objects with <code>getters.labelmaps3D</code>, and extract this/more information if you desire.</p> <h3 id="backdoor"><a href="#backdoor" class="header-anchor">#</a> Backdoor</h3> <p>Note that other than from the API, you can always access the global <code>series</code> object:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> state <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">getModule</span><span class="token punctuation">(</span><span class="token string">'segmentation'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> series <span class="token operator">=</span> state<span class="token punctuation">.</span>series<span class="token punctuation">;</span>
</code></pre></div><p>But only modify these if you know what you are doing, as you could potentially break your application by uncleanly deleting/modifying things.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/cornerstone-book/assets/js/app.9dbdfba9.js" defer></script><script src="/cornerstone-book/assets/js/2.48bf54f8.js" defer></script><script src="/cornerstone-book/assets/js/172.db97c3ef.js" defer></script><script src="/cornerstone-book/assets/js/3.6f4cde73.js" defer></script>
  </body>
</html>
