(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{447:function(e,t,a){"use strict";a.r(t);var o=a(49),s=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"tool-data"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tool-data"}},[e._v("#")]),e._v(" Tool Data")]),e._v(" "),a("blockquote",[a("p",[e._v("This is an in-progress page. Please feel free to make suggestions or add content either directly with a pull request or in a new GitHub issue.")])]),e._v(" "),a("p",[e._v("Tools often have data associated with them. For the most part, this data is managed for you, but it can be helpful to understand how to view and modify that data. Tool data has several traits:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("Element")])]),e._v(" "),a("li",[a("code",[e._v("ToolType")])]),e._v(" "),a("li",[a("code",[e._v("StateManager (Scope)")])])]),e._v(" "),a("p",[e._v("Most tools, when they create data... [[todo]]")]),e._v(" "),a("h2",{attrs:{id:"data-events"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#data-events"}},[e._v("#")]),e._v(" Data Events")]),e._v(" "),a("p",[e._v("[[todo]]")]),e._v(" "),a("p",[a("em",[e._v("Universal")])]),e._v(" "),a("ul",[a("li",[e._v("Added: "),a("code",[e._v("cornerstonetoolsmeasurementadded")])]),e._v(" "),a("li",[e._v("Modified: "),a("code",[e._v("cornerstonetoolsmeasurementmodified")])]),e._v(" "),a("li",[e._v("Removed: "),a("code",[e._v("cornerstonemeasurementremoved")])]),e._v(" "),a("li",[e._v("Deactivated: "),a("code",[e._v("cornerstonetoolstooldeactivated")])])]),e._v(" "),a("p",[a("em",[e._v("Specific")])]),e._v(" "),a("ul",[a("li",[a("code",[e._v("cornerstonetoolsclipstopped")])]),e._v(" "),a("li",[a("code",[e._v("cornerstonestackscroll")])])]),e._v(" "),a("h2",{attrs:{id:"data-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#data-api"}},[e._v("#")]),e._v(" Data API")]),e._v(" "),a("p",[a("strong",[e._v("addToolState")]),e._v(" is "),a("em",[e._v("mostly")]),e._v(' used internally by tools, or to restore a saved state. The most common API use case for this is to set the intial state when using the "Stack State Manager"')]),e._v(" "),a("p",[a("code",[e._v("cornerstoneTools.addToolState(element, toolType, data)")])]),e._v(" "),a("p",[a("strong",[e._v("getToolState")]),e._v(" is much more useful [[todo]]")]),e._v(" "),a("p",[a("code",[e._v("cornerstoneTools.getToolState(element, toolType)")])]),e._v(" "),a("h2",{attrs:{id:"data-context-scope"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#data-context-scope"}},[e._v("#")]),e._v(" Data Context (Scope)")]),e._v(" "),a("p",[e._v("The bulk of code around consistently managing tool properties, data, and state live in the "),a("a",{attrs:{href:"https://github.com/cornerstonejs/cornerstoneTools/tree/master/src/stateManagement",target:"_blank",rel:"noopener noreferrer"}},[e._v("/src/stateManagement"),a("OutboundLink")],1),e._v(" folder. We've already touched on "),a("code",[e._v("addToolState")]),e._v(" and "),a("code",[e._v("getToolState")]),e._v(", but we're going to take a closer look at "),a("em",[e._v("what happens")]),e._v(" when we use those methods:")]),e._v(" "),a("ul",[a("li",[e._v("Where is the tool state data stored?")]),e._v(" "),a("li",[e._v("How do multiple enabled elements share tool data?")]),e._v(" "),a("li",[e._v("When would I want tool data to be shared with more than the original image it was created on?")])]),e._v(" "),a("h3",{attrs:{id:"state-managers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#state-managers"}},[e._v("#")]),e._v(" State Managers")]),e._v(" "),a("p",[e._v("To work with "),a("code",[e._v("addToolState")]),e._v(" and "),a("code",[e._v("getToolState")]),e._v(", each State Manager must implement the below interface "),a("em",[e._v("at a minimum")]),e._v(".")]),e._v(" "),a("p",[a("em",[e._v("Interface:")])]),e._v(" "),a("ul",[a("li",[a("code",[e._v("add(element, toolType, data)")])]),e._v(" "),a("li",[a("code",[e._v("get(element, toolType)")])]),e._v(" "),a("li",[e._v("Should expose a method to call "),a("code",[e._v("setElementToolStateManager(element, toolStateManager)")])])]),e._v(" "),a("p",[a("strong",[e._v("Image Id Specific State Manager")]),e._v(" (Default)")]),e._v(" "),a("p",[e._v("This is the default context for most tools. If you attempt to "),a("code",[e._v("addToolState")]),e._v("/"),a("code",[e._v("getToolState")]),e._v(' for a tool and you haven\'t set a different "State Manager", then '),a("a",{attrs:{href:"https://github.com/cornerstonejs/cornerstoneTools/blob/master/src/stateManagement/toolState.js#L11-L13",target:"_blank",rel:"noopener noreferrer"}},[e._v("it is assumed"),a("OutboundLink")],1),e._v(" you want to set/get specific to the image's ID. For example, if you activate and use the length tool to measure part of an image:")]),e._v(" "),a("p",[a("code",[e._v("cornerstoneTools.length.activate(element, 1)")])]),e._v(" "),a("p",[e._v("Then any other enabled element with the length tool also activated will display the length tool's data on it's next render.")]),e._v(" "),a("p",[a("strong",[e._v("Stack State Manager")])]),e._v(" "),a("p",[e._v("A Stack specific tool state management strategy. This means that tool data is shared between all imageIds in a given stack.")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("cornerstoneTools.addStackStateManager(element, otherTools)")])])]),e._v(" "),a("p",[e._v("Here is a common use case for "),a("code",[e._v("addStackStateManager")]),e._v(":")]),e._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("var")]),e._v(" exampleStack "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  currentImageIdIndex "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  imageIds"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'example://1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'example://2'")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\ncornerstoneTools"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("addStackStateManager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("enabledElement"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'stack'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\ncornerstoneTools"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("addToolState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("enabledElement"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'stack'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" exampleStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),a("p",[e._v('In the above snippet, we add the "stackStateManager" for the '),a("code",[e._v("enabledElement")]),e._v(" for the "),a("code",[e._v("stack")]),e._v(" tool.")]),e._v(" "),a("p",[a("strong",[e._v("Frame of Reference State Manager")])]),e._v(" "),a("p",[e._v("A frame-of-reference specific tool state management strategy.  This means that measurement data are tied to a specific frame of reference UID and only visible to objects using that frame-of-reference UID.")]),e._v(" "),a("blockquote",[a("p",[a("em",[e._v("Needs example")])])]),e._v(" "),a("p",[a("strong",[e._v("Time Series State Manager")])]),e._v(" "),a("ul",[a("li",[a("em",[e._v("Time Series Tool")]),e._v(" ( "),a("a",{attrs:{href:"https://github.com/cornerstonejs/cornerstoneTools/blob/29182180ed3f850ba41c609b98b96464affca5f0/examples/timeSeries/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Example"),a("OutboundLink")],1),e._v(" | "),a("a",{attrs:{href:"https://github.com/cornerstonejs/cornerstoneTools/blob/29182180ed3f850ba41c609b98b96464affca5f0/examples/timeSeries/index.html#L141",target:"_blank",rel:"noopener noreferrer"}},[e._v("Source"),a("OutboundLink")],1),e._v(" )")])])])}),[],!1,null,null,null);t.default=s.exports}}]);